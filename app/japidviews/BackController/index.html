`import models.School

`extends backEndLayout
`set title:"学校缴费后台管理"


`args List<School> schools
<div class="row">
	<div class="col-sm-12">
		<div class="table-light table-borrow">
		 	<div class="table-header">
                <div class="table-caption" style="display:inline-block;">
                 全部学校
                   <a href="javascript:;" class="btn btn-info" id="btnAddOrganizeGroup" style="margin-left:15px;"> <i class="fa fa-plus"></i> 新增学校</a>
                </div>
                <div class="pull-right">
                    <input type="search" value="" class="form-control input-sm input-search" style="display:inline-block;width:initial;" placeholder="关键字">
                    <a href="javascript:;" class="btn btn-search" id="btnSearch">搜索</a>
                </div>
            </div>
			<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered table-page" id="">
				<thead>
					<tr>
						<th style="width:10%">序号</th>
						<th style="width:10%">学校名称</th>
						<th style="width:20%">商户ID</th>
						<th style="width:10%">操作</th>
					</tr>
				</thead>
				<tbody>
				`for School school:schools

				<tr class="shown">
					<td class="organizeGroup-indexOrder">1</td>
					<td class="organizeGroup-groupName">${school.name}</td>
					<td class="organizeGroup-indexOrder">${school.merchantId}</td>
					<td><a  href="javaScript:;">修改</a>
						<a  href="javaScript:;" class="view-qrcode">查看缴费码</a>
						<div class="qrcode">
							<div class="barcode-layer">
								<div class="barcode-tip">课程二维码</div>
								<div class="barcode-l" data-text="${school.qrcode}" data-url=""></div>
							</div>
						</div>
					</td>
				</tr>
				`
				</tbody>
			</table>

		</div>
	</div>
</div>


<div id="modal-add-group" class="modal fade" tabindex="-1" role="dialog" style="display: none;">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title" id="myModalLabel">新增学校</h4>
			</div>
			<div class="modal-body form-horizontal">
				<div class="form-group">
					<label class="col-sm-3 control-label text-right">学校名称：</label>
					<div class="col-sm-9">
						<input style="width:300px;" type="text" class="form-control" id="schoolName" placeholder="学校名称">
					</div>
				</div>

				<div class="form-group">
					<label class="col-sm-3 control-label text-right">商户ID：</label>
					<div class="col-sm-9">
						<input style="width:300px;" type="text" class="form-control" id="businessID" placeholder="商户ID">
					</div>
				</div>
			</div>
			<div class="modal-footer text-center">
				<button type="button" class="btn btn-primary js-add-group">保存</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>

			</div>
		</div>
	</div>
</div>


`set moreJSLink
<script type="text/javascript">
    init.push(function () {
        $('#btnAddOrganizeGroup').on('click',function(){
            $("#modal-add-group").modal("show");
        });


        //新增机构
        $('.js-add-group').click(function(){
            var schoolName = $("#schoolName").val().trim(),
                businessID=$("#businessID").val().trim();

            if(schoolName.length<1){
                $.growl.error({ message: "请输入学校名称！" });
                return;
            }
            if(businessID.length<1){
                $.growl.error({ message: "请输入商户ID！" });
                return;
            }


            $.post('/back/addSchool',{
                name:schoolName,
                merchantId:businessID
            },function(res){
                if(res.status = "true"){
                    $("#modal-add-group").modal("hide");
                    window.location.reload();
                }else{
                    $.growl.error({ message:  res.msg });
                }
            })
        })



        $(".table-page").on("hover",".view-qrcode",function(){
            console.log($(this).next().find(".barcode-l").attr("data-text"))
            $(this).next().find(".barcode-l").empty();
            $(this).next().find(".barcode-l").qrcode({
                text: $(this).next().find(".barcode-l").attr("data-text"),
                width : 300,
                height : 300,
                colorDark : "#000000",
                colorLight : "#D8D8D8",
                src: $(".barcode-l").attr("data-url")
            });
        })



	});





    window.PixelAdmin.start(init);
</script>
`